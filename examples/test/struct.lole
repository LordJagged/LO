(struct Point2D
    (x i32)
    (y i32)
)

(export main :as main)
(fn main [] i32 (
    ; TODO: use `:=`
    {p1 : Point2D = (struct.new Point2D 0 0)}
    {p1 . x = 1}
    {p1 . y = 2}

    {sum := (Point2D/add p1 (struct.new Point2D 1 1))}

    (return (Point2D/len_squared sum))
))

(fn Point2D/add ((p1 Point2D) (p2 Point2D)) Point2D (
    (return (struct.new Point2D
        {p1 . x + {p2 . x}}
        {p1 . y + {p2 . y}}
    ))
))

(fn Point2D/len_squared [(p Point2D)] i32 (
    (return {p . x * {p . x} + {p . y * {p . y}}})
))
